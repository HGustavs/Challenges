<html>
<head>
		<script>

//------------------------------------=======############==========----------------------------------------
//                                 Canvas Slide Constants and Variables
//------------------------------------=======############==========----------------------------------------

// Gradient 2d and 3d

var ctx;
var mx,my,mb=0;

// Array of array of lines of balls

var jgradient=[{r:0.76,g:0.91,b:0.94},{r:0.32,g:0.62,b:0.75},{r:0.16,g:0.12,b:0.33},{r:0.63,g:0.14,b:0.21},{r:0.99,g:0.85,b:0.63},{r:0.97,g:0.99,b:0.94}];

//----------------------------------------------------------------------------------
// Canvas Setup
//----------------------------------------------------------------------------------

function grad(arr,val)
{
    var cnt=arr.length;
    var fr=Math.min(Math.max(val,0.0),1.0)*cnt;
    var pos=Math.floor(fr);
    var dec=fr-pos;

    p1=arr[pos%cnt];
    p2=arr[(pos+1)%cnt];

    var r=Math.round((p1.r+(p2.r-p1.r)*dec)*255.0);
    var g=Math.round((p1.g+(p2.g-p1.g)*dec)*255.0);
    var b=Math.round((p1.b+(p2.b-p1.b)*dec)*255.0);
 
    return `RGB(${r},${g},${b})`;
}

function setup()
{
    var cc = document.getElementById("myCanvas");
    ctx = cc.getContext("2d");

    drawit();
}
        
function updatestate()
{

}

function mouseUp(e)
{
    mb=0;
}

function mouseDown(e)
{
    mb=e.which;
}

function mouseMove(e,t)
{
    var rect = e.target.getBoundingClientRect();
    mx = e.clientX - rect.left; //x position within the element.
    my = e.clientY - rect.top;  //y position within the element
}

var vv=0.0;
function spiral(xk,yk)
{
    // Center 0..1 coordinates
    xk=(Math.max(0.0,Math.min(1.0,xk))-0.5)*2.0;
    yk=(Math.max(0.0,Math.min(1.0,yk))-0.5)*2.0;
    
    len=Math.sqrt((xk*xk)+(yk*yk));

    var revo=1.0/2;

    return ((((Math.atan2(yk,xk)+3.14)/(3.14*revo))+len)%1.0);
}


function drawit()
{	
    ctx.clearRect(0,0,900,900);

    var tcnt=60;
    var twidth=10;
    for(var j=0;j<tcnt;j++){
        for(var i=0;i<tcnt;i++){
            var sp=spiral(i/tcnt,j/tcnt);
            console.log(sp);
            ctx.fillStyle=grad(jgradient,sp);
            ctx.beginPath();
            ctx.moveTo(i*twidth,j*twidth);
            ctx.lineTo((i+1)*twidth,j*twidth);
            ctx.lineTo((i+1)*twidth,(j*twidth)+twidth);
            ctx.lineTo(i*twidth,(j*twidth)+twidth);
            ctx.lineTo(i*twidth,(j*twidth));
            ctx.fill();
        }
    }

    vv+=0.001;
    //window.requestAnimationFrame(drawit);
} 			

		</script>
</head>
<body onload="setup();">
 	<canvas id="myCanvas" onmousedown="mouseDown(event);" onmouseup="mouseUp(event);" onmousemove="mouseMove(event,this);" width="900" height="900" style="border:1px solid #000000;"></canvas> 
</body>
