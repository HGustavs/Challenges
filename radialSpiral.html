<html>
<head>
		<script>

//------------------------------------=======############==========----------------------------------------
//                                 Canvas Slide Constants and Variables
//------------------------------------=======############==========----------------------------------------

// Gradient 2d and 3d

var ctx;
var mx,my,mb=0;

// Array of array of lines of balls

var agradient=[{r:0.25,g:0.6,b:0.99},{r:0.17,g:0.75,b:0.85},{r:0.27,g:0.91,b:0.58},{r:0.75,g:0.95,b:0.2},{r:0.99,g:0.62,b:0.15},{r:0.99,g:0.36,b:0.53},{r:0.48,g:0.36,b:0.9},{r:0.38,g:0.54,b:0.99}];
var bgradient=[{r:0.0,g:0.0,b:0.0},{r:0.5,g:0.5,b:0.5},{r:1.0,g:1.0,b:1.0}];
var cgradient=[{r:0.92,g:0.46,b:0.14},{r:0.74,g:0.30,b:0.28},{r:0.43,g:0.31,b:0.43},{r:0.43,g:0.52,b:0.53},{r:0.50,g:0.63,b:0.42},{r:0.99,g:0.53,b:0.17},];
var dgradient=[{r:0.69,g:0.07,b:0.44},{r:0.89,g:0.35,b:0.39},{r:0.99,g:0.70,b:0.42},{r:0.99,g:0.81,b:0.70},{r:0.69,g:0.82,b:0.98},{r:0.49,g:0.73,b:0.91},{r:0.82,g:0.49,b:0.68}];
var egradient=[{r:0.94,g:0.11,b:0.38},{r:0.98,g:0.64,b:0.31},{r:0.97,g:0.82,b:0.59},{r:0.96,g:0.94,b:0.80},{r:0.67,g:0.92,b:0.83},{r:0.18,g:0.62,b:0.84},{r:0.26,g:0.29,b:0.62},{r:0.31,g:0.04,b:0.44}];
var fgradient=[{r:0.96,g:0.81,b:0.54},{r:0.92,g:0.87,b:0.89},{r:0.63,g:0.78,b:0.92},{r:0.20,g:0.53,b:0.92},{r:0.27,g:0.31,b:0.54},{r:0.34,g:0.17,b:0.26},{r:0.97,g:0.31,b:0.18},{r:0.99,g:0.72,b:0.16}];
var ggradient=[{r:0.28,g:0.32,b:0.52},{r:0.57,g:0.41,b:0.50},{r:0.88,g:0.63,b:0.43},{r:0.96,g:0.74,b:0.41}];
var hgradient=[{r:0.67,g:0.15,b:0.14},{r:0.99,g:0.57,b:0.21},{r:0.91,g:0.83,b:0.43},{r:0.29,g:0.74,b:0.39},{r:0.05,g:0.68,b:0.70},{r:0.16,g:0.45,b:0.60},{r:0.61,g:0.37,b:0.58},{r:0.56,g:0.13,b:0.37}];
var igradient=[{r:0.93,g:0.32,b:0.12},{r:0.98,g:0.66,b:0.42},{r:0.89,g:0.93,b:0.70},{r:0.73,g:0.86,b:0.72},{r:0.89,g:0.93,b:0.70},{r:0.28,g:0.82,b:0.85}];

//----------------------------------------------------------------------------------
// Canvas Setup
//----------------------------------------------------------------------------------

function grad(arr,val)
{
    var cnt=arr.length;
    var fr=Math.min(Math.max(val,0.0),1.0)*cnt;
    var pos=Math.floor(fr);
    var dec=fr-pos;

    p1=arr[pos%cnt];
    p2=arr[(pos+1)%cnt];

    var r=Math.round((p1.r+(p2.r-p1.r)*dec)*255.0);
    var g=Math.round((p1.g+(p2.g-p1.g)*dec)*255.0);
    var b=Math.round((p1.b+(p2.b-p1.b)*dec)*255.0);
 
    return `RGB(${r},${g},${b})`;
}

function setup()
{
    var cc = document.getElementById("myCanvas");
    ctx = cc.getContext("2d");

    drawit();
}
        
function updatestate()
{

}

function mouseUp(e)
{
    mb=0;
}

function mouseDown(e)
{
    mb=e.which;
}

function mouseMove(e,t)
{
    var rect = e.target.getBoundingClientRect();
    mx = e.clientX - rect.left; //x position within the element.
    my = e.clientY - rect.top;  //y position within the element
}

var vv=0.0;
function spiral(xk,yk)
{
    // Center 0..1 coordinates
    xk=(Math.max(0.0,Math.min(1.0,xk))-0.5)*2.0;
    yk=(Math.max(0.0,Math.min(1.0,yk))-0.5)*2.0;
    
    len=Math.sqrt((xk*xk)+(yk*yk));

    var revo=1.0/2;

    return ((((Math.atan2(yk,xk)+3.14)/(3.14*revo))+len)%1.0);
}


function drawit()
{	
    ctx.clearRect(0,0,900,900);

    var tcnt=60;
    var twidth=10;
    for(var j=0;j<tcnt;j++){
        for(var i=0;i<tcnt;i++){
            var sp=spiral(i/tcnt,j/tcnt);
            console.log(sp);
            ctx.fillStyle=grad(cgradient,sp);
            ctx.beginPath();
            ctx.moveTo(i*twidth,j*twidth);
            ctx.lineTo((i+1)*twidth,j*twidth);
            ctx.lineTo((i+1)*twidth,(j*twidth)+twidth);
            ctx.lineTo(i*twidth,(j*twidth)+twidth);
            ctx.lineTo(i*twidth,(j*twidth));
            ctx.fill();
        }
    }

    vv+=0.001;
    //window.requestAnimationFrame(drawit);
} 			

		</script>
</head>
<body onload="setup();">
 	<canvas id="myCanvas" onmousedown="mouseDown(event);" onmouseup="mouseUp(event);" onmousemove="mouseMove(event,this);" width="900" height="900" style="border:1px solid #000000;"></canvas> 
</body>
